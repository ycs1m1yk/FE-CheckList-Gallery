function o(t){this.options=t,!t.deferSetup&&this.setup()}o.prototype={constructor:o,setup:function(){this.options.setup&&this.options.setup(),this.initialised=!0},on:function(){!this.initialised&&this.setup(),this.options.match&&this.options.match()},off:function(){this.options.unmatch&&this.options.unmatch()},destroy:function(){this.options.destroy?this.options.destroy():this.off()},equals:function(t){return this.options===t||this.options.match===t}};var d=o;function p(t,i){var e=0,s=t.length,n;for(e;e<s&&(n=i(t[e],e),n!==!1);e++);}function y(t){return Object.prototype.toString.apply(t)==="[object Array]"}function m(t){return typeof t=="function"}var l={isFunction:m,isArray:y,each:p},v=d,a=l.each;function h(t,i){this.query=t,this.isUnconditional=i,this.handlers=[],this.mql=window.matchMedia(t);var e=this;this.listener=function(s){e.mql=s.currentTarget||s,e.assess()},this.mql.addListener(this.listener)}h.prototype={constuctor:h,addHandler:function(t){var i=new v(t);this.handlers.push(i),this.matches()&&i.on()},removeHandler:function(t){var i=this.handlers;a(i,function(e,s){if(e.equals(t))return e.destroy(),!i.splice(s,1)})},matches:function(){return this.mql.matches||this.isUnconditional},clear:function(){a(this.handlers,function(t){t.destroy()}),this.mql.removeListener(this.listener),this.handlers.length=0},assess:function(){var t=this.matches()?"on":"off";a(this.handlers,function(i){i[t]()})}};var w=h,q=w,u=l,M=u.each,f=u.isFunction,Q=u.isArray;function c(){if(!window.matchMedia)throw new Error("matchMedia not present, legacy browsers require a polyfill");this.queries={},this.browserIsIncapable=!window.matchMedia("only all").matches}c.prototype={constructor:c,register:function(t,i,e){var s=this.queries,n=e&&this.browserIsIncapable;return s[t]||(s[t]=new q(t,n)),f(i)&&(i={match:i}),Q(i)||(i=[i]),M(i,function(r){f(r)&&(r={match:r}),s[t].addHandler(r)}),this},unregister:function(t,i){var e=this.queries[t];return e&&(i?e.removeHandler(i):(e.clear(),delete this.queries[t])),this}};var b=c,$=b,g=new $;export{g as s};
